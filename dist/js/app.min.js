(()=>{"use strict";let e=document.querySelector(".hi__wrapper"),t=localStorage.getItem("data");document.querySelector(".hi__close"),e.style.display=null===t?"block":"none",localStorage.setItem("data",1);const n=document.querySelector("canvas"),a=document.querySelector(".wrapper__touch"),l=n.getContext("2d");let o="#000000",s="#000000",c=1,i=null,r=null;function d(){n.width=window.innerWidth,n.height=window.innerHeight}function u(e){let t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t}function y(e){let t=document.querySelector(".canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t}function m(e,t,n=`${o}`){l.fillStyle=n,l.strokeStyle=n,l.beginPath(),l.arc(e,t,""+x/2,0,2*Math.PI),l.fill()}d(),a.append(u(n)),window.addEventListener("resize",d),document.querySelector(".color__box").addEventListener("change",(function(e){e.preventDefault();let t=document.querySelector(".color__choose");o=t.value,s=t.value})),a.addEventListener("touchstart",(function(e){if(e.target.classList.contains("canvas")||e.target.classList.contains("number__box")){if(c>=1){let e=document.querySelectorAll("canvas");for(let t=c+1;t<e.length;t++)e[t].remove()}!function(e){i={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},r={x:i.x,y:i.y},m(i.x,i.y,`${o}`),l.beginPath(),l.moveTo(i.x,i.y)}(e)}})),a.addEventListener("touchmove",(function(e){(e.target.classList.contains("canvas")||e.target.classList.contains("number__box"))&&function(e){r={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},l.lineTo(r.x,r.y),l.lineWidth=x,l.strokeStyle=o,l.lineCap="round",l.lineJoin="bevel",l.stroke()}(e)})),a.addEventListener("touchend",(function(e){(e.target.classList.contains("canvas")||e.target.classList.contains("number__box"))&&(function(e){c++,A.style.display=c>0?"block":"none",r={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}}(e),a.append(u(n)))}));let p={x:0,y:0},g=!1;n.addEventListener("mousedown",(function(e){0===e.button&&(p.x=e.pageX-this.offsetLeft,p.y=e.pageY-this.offsetTop,g=!0,m(p.x,p.y,`${o}`),l.beginPath(),l.moveTo(p.x,p.y))})),n.addEventListener("mousemove",(function(e){if(0===e.button&&1==g){if(c>=1){let e=document.querySelectorAll("canvas");for(let t=c+1;t<e.length;t++)e[t].remove()}p.x=e.pageX-this.offsetLeft,p.y=e.pageY-this.offsetTop,l.lineTo(p.x,p.y),l.lineWidth=x,l.strokeStyle=o,l.lineCap="round",l.lineJoin="bevel",l.stroke()}})),n.addEventListener("mouseup",(function(e){0===e.button&&(p.x=e.pageX-this.offsetLeft,p.y=e.pageY-this.offsetTop,l.lineTo(p.x,p.y),l.stroke(),l.closePath(),g=!1,a.append(u(n)),c++,A.style.display=c>0?"block":"none")}));let _,f=document.querySelectorAll(".tool__item"),h=document.querySelectorAll(".btn__audio"),v=0;function b(){_=navigator.onLine?1:0}window.addEventListener("online",b),window.addEventListener("offline",b),b(),a.addEventListener("click",(function(t){t.target.classList.contains("hi__wrapper")||t.target.classList.contains("hi__text")||t.target.classList.contains("hi__name")||(e.style.display="none");let i=document.querySelector(".number__box"),r=document.querySelector(".number__choose"),d=document.querySelector(".number__choose-close"),y=document.querySelector(".range__wrapper"),m=document.querySelector(".range__close"),p=document.querySelector(".btn__play"),g=parseInt(t.target.dataset.number),L=document.querySelector(".menu__wrapper"),x=document.querySelector(".reset__confirmation"),S=document.querySelector(".menu__box"),q=document.querySelector(".pay__box"),k=document.querySelector(".picture__wrapper"),w=document.getElementById("picCurrent"),E=document.querySelector(".pic__current"),T=document.getElementById("imgCurrent"),$=document.querySelector(".img__current");function X(){k.style.display="none",i.style.display="none"}function C(){i.style.display="none",r.style.display="none",p.classList.remove("active")}function M(){f[g].classList.remove("active"),f[1].classList.add("active")}if(t.target.classList.contains("btn__audio")&&(v=parseInt(t.target.dataset.sound),h.forEach((e=>e.classList.remove("active"))),h[v].classList.add("active")),t.target.classList.contains("tool__click")&&(f.forEach((e=>e.classList.remove("active"))),y.style.display="none",t.target.classList.add("active"),r.style.display="none",o=0===g?"#ffffff":s),t.target.classList.contains("width__box")&&(y.style.display="block",f[g].classList.add("active"),m.onclick=function(){y.style.display="none",M()}),t.target.classList.contains("reset__box")&&(L.style.display="flex",x.style.display="block",L.addEventListener("click",(function(e){if(e.target.classList.contains("yes")&&(l.clearRect(0,0,n.width,n.height),I.style.display="none",A.style.display="none",L.style.display="none",x.style.display="none",k.style.display="none",E.style.display="none",$.style.display="none",M(),C(),document.querySelector("#imgCurrent").src="",c>1)){let e=document.querySelectorAll("canvas");for(let t=1;t<e.length;t++)e[t].remove();a.append(u(n)),c=1}e.target.classList.contains("no")&&(L.style.display="none",x.style.display="none",M())}))),t.target.classList.contains("number__btn")){function D(e){var t=new Audio;t.src=e,t.autoplay=!0}r.style.display="grid",d.onclick=function(){r.style.display="none",M()},r.addEventListener("click",(function(e){let t=e.target.dataset.point;if(e.target.classList.contains("number__choose-item")){if(b(),l.clearRect(0,0,n.width,n.height),i.style.display="flex",i.innerText="",k.style.display="none",0===_){let e=localStorage.getItem(`imgData${t}`);$.style.display="block",E.style.display="none",X(),T.innerText="",T.src="data:image/gif;base64,"+e,p.classList.remove("active")}else{i.insertAdjacentHTML("afterbegin",`<img src="img/number/number${t}.gif?rand${Math.random()}" alt="number" />`),p.classList.add("active");let e=`./files/audio/audio${t}.mp3`;0===v&&D(e),p.onclick=function(){i.innerText="",i.insertAdjacentHTML("afterbegin",`<img src="img/number/number${t}.gif?rand${Math.random()}" alt="number" />`),0===v&&D(e)}}if(I.style.display="none",A.style.display="none",c>1){let e=document.querySelectorAll("canvas");for(let t=1;t<e.length;t++)e[t].remove();a.append(u(n)),c=1}r.style.display="none",M(),o=s}e.target.classList.contains("number__choose-delete")&&(C(),f[1].classList.add("active"),f[4].classList.remove("active"))}))}if(t.target.classList.contains("menu__btn")){let P=document.querySelector(".info__box"),Y=document.querySelector(".picture__box");L.style.display="flex",S.style.display="flex",S.addEventListener("click",(function(t){t.target.classList.contains("menu__close")&&(L.style.display="none",S.style.display="none"),t.target.classList.contains("manual")&&(e.style.display="none",P.style.display="flex",document.querySelector(".info__close").onclick=function(){P.style.display="none"}),t.target.classList.contains("pay")&&(q.style.display="flex",document.querySelector(".pay__close").onclick=function(){q.style.display="none"}),t.target.classList.contains("choose__picture")&&(Y.style.display="grid",document.querySelector(".picture__close").onclick=function(){Y.style.display="none"},Y.addEventListener("click",(function(e){if(e.target.classList.contains("picture__click")){let t=e.target.dataset.point,a=localStorage.getItem(`pictureData${t}`);Y.style.display="none",L.style.display="none",S.style.display="none",i.style.display="none",document.querySelector("#imgCurrent").src="",w.src="",l.clearRect(0,0,n.width,n.height),I.style.display="none",A.style.display="none",L.style.display="none",0===_?(w.src="data:image/gif;base64,"+a,X(),E.style.display="block",$.style.display="none"):(k.style.display="flex",k.innerText="",k.insertAdjacentHTML("afterbegin",`<img src="img/picture/pic${t}.jpg?rand${Math.random()}" alt="животное" />`)),M()}})))}))}}));let L,x,S=document.querySelector(".chekbox__track"),q=document.querySelector(".range__input"),k=document.querySelector(".range__value-box"),w=(q.step,q.max),E=q.min,T=q.value;!function(){L=(T-E)/(w-E)*100,S.style.background=`linear-gradient(to right, #98c1d9 0%, #98c1d9 ${L}%,  transparent ${L}%, transparent 100%)`,k.style.left=`${L}%`;let e=document.querySelector(".range__value"),t=document.querySelector(".range__number.begin"),n=document.querySelector(".range__number.end");e.innerText=q.value,t.innerText=E,n.innerText=w,x=q.value}(),q.addEventListener("input",(function(){let e,t=document.querySelector(".chekbox__track"),n=document.querySelector(".range__input"),a=document.querySelector(".range__value-box"),l=n.max,o=n.min;e=(n.value-o)/(l-o)*100,t.style.background=`linear-gradient(to right, #98c1d9 0%,  #98c1d9 ${e}%, transparent ${e}%, transparent 100%)`,a.style.left=`${e}%`,document.querySelector(".range__value").innerText=n.value,x=n.value;let s=document.querySelector(".range__number.end"),c=document.querySelector(".range__number.begin");return e<10&&(a.style.transform="translateX(3px)"),e>10&&(a.style.transform="translateX(2px)"),e>20&&(a.style.transform="translateX(-1px)"),e>30&&(a.style.transform="translateX(-3px)"),e>40&&(a.style.transform="translateX(-7px)"),e>50&&(a.style.transform="translateX(-7px)"),e>60&&(a.style.transform="translateX(-10px)"),e>80&&(a.style.transform="translateX(-15px)"),e>90&&(a.style.transform="translateX(-17px)"),c.style.visibility=e<5?"hidden":"visible",s.style.display=e>95?"none":"flex",x})),document.querySelector(".screenshot__btn").addEventListener("click",(function(){html2canvas(document.querySelector(".canvas")).then((e=>{e.toBlob((function(e){saveAs(e,"hangge.png")}))}))}));let $,A=document.querySelector(".pictire__left"),I=document.querySelector(".pictire__right");function X(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,t.width,t.height),$=t.toDataURL("image/gif"),$.replace(/^data:image\/(png|jpg|gif);base64,/,"")}A.addEventListener("click",(function(){let e=document.querySelectorAll("canvas");I.style.display="block",2===c?(A.style.display="none",c=1):c--,y(e[c])})),I.addEventListener("click",(function(){let e=document.querySelectorAll("canvas");A.style.display="block",c!==e.length-1&&(c++,y(e[c]))})),document.querySelector(".btn__phone").onclick=async function(e){let t=e.target.dataset.link,n=document.createElement("INPUT");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),alert("Номер телефона "+t+" скопирован")},window.addEventListener("load",(function(){let e=document.querySelectorAll(".number__pic-img"),t=new Array;for(let n=0;n<e.length;n++)t[n]=X(e[n]),localStorage.setItem(`imgData${n}`,t[n])})),window.addEventListener("load",(function(){let e=document.querySelectorAll(".picture__img"),t=new Array;for(let n=0;n<e.length;n++)t[n]=X(e[n]),localStorage.setItem(`pictureData${n}`,t[n])}))})();